<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Heaven's Radio</title>
  <style>
    html,body {height:100%;margin:0;background:#120a3b}
    #hr-root{min-height:560px;display:grid;place-items:center;padding:24px;
      color:#e8f0ff;text-align:center;font:600 18px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .note{opacity:.85;font-weight:500;font-size:14px;margin-top:8px}
    code{font:600 12px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
  </style>

  <!-- CSS from raw GitHub (not jsDelivr) -->
  <link rel="stylesheet"
        href="https://raw.githubusercontent.com/akffa-web/akffa-web-heavens-radio/main/player.css?v=now">
</head>
<body>
  <div id="hr-root">
    Loading Heaven’s Radio…
    <div class="note">If this doesn’t change in a few seconds, we’ll print a hint here.</div>
  </div>

  <script>
    // MUST be defined before loading player.js
    window.HR_CONFIG = {
      poolsUrl: "https://raw.githubusercontent.com/akffa-web/heavens-radio-pools/main/Song%20List.txt?v=now",
      introEvery: 6, podEvery: 12, skipsPerHour: 3
    };

    // Load JS from raw GitHub only (avoid old cached CDN)
    const s = document.createElement('script');
    s.defer = true;
    s.src = "https://raw.githubusercontent.com/akffa-web/akffa-web-heavens-radio/main/player.js?v=now";
    s.onerror = function(){
      const root = document.getElementById('hr-root');
      root.innerHTML =
        "<div><div style='font-size:20px;font-weight:800;color:#ff9a9a'>Couldn’t load the player script (raw GitHub).</div>"+
        "<div class='note'>Open this URL in a new tab to confirm it loads:<br><code>"+ s.src +"</code></div></div>";
    };
    document.body.appendChild(s);

    // After 6s, if nothing mounted, show a gentle hint
    setTimeout(() => {
      const root = document.getElementById('hr-root');
      if (root && root.textContent.includes("Loading Heaven’s Radio")) {
        root.innerHTML =
          "<div><div style='font-size:20px;font-weight:800;color:#ffd27a'>Still waiting…</div>"+
          "<div class='note'>Please hard-refresh the page (Ctrl/Cmd + Shift + R). GitHub Pages may be serving an older cached index.html.</div></div>";
      }
    }, 6000);
  </script>
</body>
</html>
