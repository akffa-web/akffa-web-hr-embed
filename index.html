<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AKFFA Player</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0a22;
    --panel:#1a1840;
    --panel-grad:linear-gradient(180deg,#2a2860 0%, #1b1842 100%);
    --panel-border:rgba(255,255,255,0.18);
    --glass:rgba(255,255,255,0.08);
    --glass-stroke:rgba(255,255,255,0.28);
    --text:#eef2ff;
    --muted:#c9d1e1;

    --timeline-h:4px;                 /* half thickness */
    --timeline-radius:999px;
    --peach:#ffb197;

    --tile-size:116px;                /* side buttons */
    --dial:280px;                     /* big circle */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    color:var(--text);
    background:#0b0a22;
    background-image:radial-gradient(1200px 600px at 65% 8%, #1a1840 0%, #0b0a22 55%);
    display:grid; place-items:center; padding:28px;
  }

  .player{
    width:min(980px, 94vw);
    display:grid;
    grid-template-rows:auto auto auto;
    gap:22px;
    justify-items:center;
  }

  /* ====== TITLE PILL ====== */
  .title-pill{
    width:clamp(320px, 62vw, 640px); /* uniform but responsive */
    background: var(--panel-grad);
    border:1px solid var(--panel-border);
    border-radius:22px;
    padding:18px 18px 16px 22px;
    box-shadow:0 14px 40px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.06);
    position:relative;
  }
  .title-row{
    display:flex; align-items:center; gap:10px; justify-content:center;
  }
  .fav{
    position:absolute; right:14px; top:14px;
    display:grid; place-items:center; width:36px; height:36px;
    border-radius:999px; background:transparent; color:var(--text);
    border:1px solid var(--panel-border);
    cursor:pointer;
    backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  }
  .fav svg{width:20px; height:20px; opacity:.85}

  .titlebox{
    display:flex; align-items:baseline; gap:.55rem;
    overflow:hidden; white-space:nowrap; text-overflow:ellipsis;
    justify-content:center;
    width:100%;
  }
  .artist{ font-size:16px; letter-spacing:.08em; text-transform:uppercase; font-weight:300; opacity:.95; }
  .sep{ opacity:.6; font-weight:300; }
  .song{ font-size:26px; font-weight:300; line-height:1.1; }

  .times{
    margin-top:8px; text-align:center; font-size:13px; color:var(--muted); opacity:.9;
  }

  /* ====== CONTROL STRIP ====== */
  .controls{
    width:100%;
    display:grid;
    grid-template-columns:1fr auto 1fr;
    align-items:center;
    gap:34px;              /* bigger gap between title pill and play cluster visually */
    justify-items:center;
  }

  .tile{
    width:var(--tile-size); height:var(--tile-size);
    display:grid; place-items:center;
    border-radius:24px;
    background:linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.04) 100%);
    border:1px solid var(--panel-border);
    box-shadow:inset 0 0 0 1px rgba(255,255,255,0.05), 0 18px 40px rgba(0,0,0,.35);
  }

  .btn{ cursor:pointer; background:transparent; color:var(--text); border:0; }
  .btn svg{ width:24px; height:24px; display:block; }

  /* Center dial */
  .dial{
    position:relative; width:var(--dial); height:var(--dial);
    border-radius:999px;
    display:grid; place-items:center;
  }
  .dial-ring{
    position:absolute; inset:0;
    border-radius:inherit;
    background:conic-gradient(from 0deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    box-shadow:inset 0 0 0 14px rgba(0,0,0,.45),
               inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .dial-core{
    width:calc(var(--dial) - 84px);
    height:calc(var(--dial) - 84px);
    border-radius:999px;
    background:#ffffff;
    box-shadow:0 18px 60px rgba(0,0,0,.35), inset 0 0 0 8px #161533;
    display:grid; place-items:center;
  }

  /* PLAY button = transparent glass with white icon */
  .play{
    width:140px; height:140px;
    border-radius:999px;
    backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
    background:var(--glass);
    border:1px solid var(--glass-stroke);
    display:grid; place-items:center;
    box-shadow:inset 0 0 0 1px rgba(255,255,255,0.06), 0 8px 24px rgba(0,0,0,.25);
    transition:transform .18s ease, background .18s ease;
  }
  .play:hover{ transform:translateY(-1px); background:rgba(255,255,255,.12); }
  .play svg{ width:48px; height:48px; color:#fff; }

  /* Stop / Next tiles: less padding + more rounded icon plate */
  .square-btn{
    width:64px; height:64px; border-radius:18px;
    display:grid; place-items:center;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.18);
    transition:background .2s ease, transform .18s ease;
  }
  .square-btn:hover{ background:rgba(255,255,255,.10); transform:translateY(-1px); }
  .square-btn svg{ width:22px; height:22px; }

  /* ====== tiny top timeline sitting on ring ====== */
  .halo-wrap{
    position:absolute; left:50%; top:-6px; transform:translateX(-50%);
    width:180px; height:var(--timeline-h);
  }
  .halo-track{
    position:absolute; inset:0;
    background:rgba(255,255,255,.25);
    border-radius:var(--timeline-radius);
    overflow:hidden;
  }
  .halo-fill{
    position:absolute; inset:0; width:0%;
    background:linear-gradient(90deg,#6cf 0%, #7fffd4 20%, #f9f871 40%, #ffa3e0 60%, #9ad0ff 80%, #6cf 100%);
    background-size:300% 100%;
    animation:swirl 6s linear infinite;
    border-radius:var(--timeline-radius);
    will-change:width, background-position;
  }
  @keyframes swirl{ 0%{background-position:0% 0} 100%{background-position:300% 0} }

  .halo-thumb{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:10px; height:10px; border-radius:999px; left:0%;
    background:var(--peach); opacity:.35;
    box-shadow:0 0 0 2px rgba(255,177,151,0.18),
               0 4px 12px rgba(255,177,151,0.20);
    pointer-events:none;
  }

  /* A11y time readout under dial for mobile (hidden on desktop) */
  .time-inline{ display:none; margin-top:10px; font-size:12px; color:var(--muted); opacity:.85; }

  @media (max-width:720px){
    :root{ --dial:250px; --tile-size:100px; }
    .song{ font-size:22px; }
  }
  @media (max-width:520px){
    :root{ --dial:220px; --tile-size:92px; }
    .time-inline{ display:block; }
  }
</style>
</head>
<body>
  <main class="player" role="region" aria-label="Music Player">

    <!-- Title pill -->
    <section class="title-pill">
      <button class="fav" aria-label="Favorite">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
      </button>

      <div class="title-row">
        <div class="titlebox" id="titleBox">
          <span class="artist" id="artistTxt">ONE TRIBE</span>
          <span class="sep">—</span>
          <span class="song" id="songTxt">Dance for Jesus</span>
        </div>
      </div>
      <div class="times"><span id="timeCurrent">0:00</span> • <span id="timeTotal">0:00</span></div>
    </section>

    <!-- Controls -->
    <section class="controls" aria-label="Controls">
      <div class="tile">
        <button class="btn square-btn" id="stopBtn" aria-label="Stop">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"/></svg>
        </button>
      </div>

      <div class="dial">
        <div class="dial-ring"></div>

        <!-- tiny top halo progress -->
        <div class="halo-wrap" id="halo" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Seek">
          <div class="halo-track"></div>
          <div class="halo-fill" id="haloFill"></div>
          <div class="halo-thumb" id="haloThumb"></div>
        </div>

        <div class="dial-core">
          <button class="btn play" id="playBtn" aria-label="Play">
            <!-- toggled by JS -->
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          </button>
        </div>

        <div class="time-inline"><span id="timeInline">0:00 / 0:00</span></div>
      </div>

      <div class="tile">
        <button class="btn square-btn" id="nextBtn" aria-label="Next">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 6l7 6-7 6V6zm8 0h2v12h-2z"/></svg>
        </button>
      </div>
    </section>

    <!-- (Optional) second row for previous etc.
    <section class="controls" style="margin-top:-10px">
      <div class="tile"><button class="btn square-btn" id="prevBtn" aria-label="Previous">…</button></div>
    </section>
    -->
    <audio id="audio" preload="metadata"></audio>
  </main>

<script>
  // ====== Simple playlist (swap with your files) ======
  const playlist = [
    { artist: 'One Tribe', title: 'Dance for Jesus', src: 'media/dance-for-jesus.mp3' },
    { artist: 'AKFFA', title: 'Glass Chapel', src: 'media/glass-chapel.mp3' },
    { artist: 'AKFFA', title: 'Citizen of Heaven', src: 'media/citizen-of-heaven.mp3' },
  ];

  // Elements
  const audio = document.getElementById('audio');
  const playBtn = document.getElementById('playBtn');
  const stopBtn = document.getElementById('stopBtn');
  const nextBtn = document.getElementById('nextBtn');
  // const prevBtn = document.getElementById('prevBtn'); // if you enable it

  const artistTxt = document.getElementById('artistTxt');
  const songTxt = document.getElementById('songTxt');
  const timeCurrent = document.getElementById('timeCurrent');
  const timeTotal = document.getElementById('timeTotal');
  const timeInline = document.getElementById('timeInline');

  const halo = document.getElementById('halo');
  const haloFill = document.getElementById('haloFill');
  const haloThumb = document.getElementById('haloThumb');

  let i = 0, isPlaying = false;

  // Helpers
  const fmt = s => {
    if (!isFinite(s)) return '0:00';
    const m = Math.floor(s/60);
    const sec = Math.floor(s%60).toString().padStart(2,'0');
    return `${m}:${sec}`;
  };
  function setPlayIcon(playing){
    playBtn.innerHTML = playing
      ? '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>'
      : '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>';
    playBtn.setAttribute('aria-label', playing ? 'Pause' : 'Play');
  }
  function setTitle(meta){
    artistTxt.textContent = (meta.artist||'').toUpperCase();
    songTxt.textContent = meta.title||'';
    document.title = `${(meta.artist||'').toUpperCase()} — ${meta.title||''}`;
  }

  // Load / control
  function load(k){
    i = (k + playlist.length) % playlist.length;
    const t = playlist[i];
    setTitle(t);
    audio.src = t.src;
    audio.load();
    isPlaying = false;
    setPlayIcon(false);
    updateProgress(0, audio.duration || 0);
    timeCurrent.textContent = '0:00';
    timeTotal.textContent = '0:00';
    if (timeInline) timeInline.textContent = '0:00 / 0:00';
  }

  function playPause(){
    if (!audio.src) load(i);
    if (audio.paused){
      audio.play().then(()=>{ isPlaying=true; setPlayIcon(true); }).catch(console.error);
    }else{
      audio.pause(); isPlaying=false; setPlayIcon(false);
    }
  }
  function stop(){
    audio.pause(); audio.currentTime = 0; isPlaying=false; setPlayIcon(false);
  }
  function next(){ load(i+1); audio.play().then(()=>{ isPlaying=true; setPlayIcon(true); }).catch(console.error); }
  // function prev(){ load(i-1); audio.play().then(()=>{ isPlaying=true; setPlayIcon(true); }).catch(console.error); }

  // Tiny halo progress updates
  function updateProgress(cur, dur){
    const pct = dur ? (cur/dur)*100 : 0;
    haloFill.style.width = pct + '%';
    haloThumb.style.left = pct + '%';
    halo.setAttribute('aria-valuenow', Math.round(pct));
  }

  // Seek via halo
  function seekFromEvent(e){
    const rect = halo.getBoundingClientRect();
    const x = Math.min(Math.max(e.clientX - rect.left, 0), rect.width);
    const pct = x / rect.width;
    if (isFinite(audio.duration)) audio.currentTime = audio.duration * pct;
  }

  // Events
  playBtn.addEventListener('click', playPause);
  stopBtn.addEventListener('click', stop);
  nextBtn.addEventListener('click', next);
  // if (prevBtn) prevBtn.addEventListener('click', prev);

  audio.addEventListener('loadedmetadata', ()=>{
    timeTotal.textContent = fmt(audio.duration);
    if (timeInline) timeInline.textContent = `0:00 / ${fmt(audio.duration)}`;
  });
  audio.addEventListener('timeupdate', ()=>{
    updateProgress(audio.currentTime, audio.duration);
    timeCurrent.textContent = fmt(audio.currentTime);
    timeTotal.textContent = fmt(audio.duration);
    if (timeInline) timeInline.textContent = `${fmt(audio.currentTime)} / ${fmt(audio.duration)}`;
  });
  audio.addEventListener('ended', next);

  // Halo interactions (mouse)
  let dragging=false;
  halo.addEventListener('mousedown', e=>{ dragging=true; seekFromEvent(e); });
  window.addEventListener('mousemove', e=>{ if(dragging) seekFromEvent(e); });
  window.addEventListener('mouseup', ()=> dragging=false);
  halo.addEventListener('click', seekFromEvent);

  // Keyboard
  document.addEventListener('keydown', e=>{
    if (e.code==='Space'){ e.preventDefault(); playPause(); }
    if (e.code==='ArrowRight'){ audio.currentTime = Math.min((audio.currentTime+5), audio.duration||0); }
    if (e.code==='ArrowLeft'){ audio.currentTime = Math.max((audio.currentTime-5), 0); }
  });

  // Init
  load(0);
</script>
</body>
</html>
